#Requires AutoHotkey v2.0

#Include "../DefaultMap.ahk2"
#Include "../Types.ahk2"
#Include "../MatchGroup.ahk2"

ezÎ©DoubleReplacer(lower, upper) {
	Static double_length_p_1 := StrLen("double") + 1
	replacer(match, whole_text) {
		trimmed := match[1]
		If (IsUpper(SubStr(trimmed, 1, 1)) Or IsUpper(SubStr(trimmed, double_length_p_1, 1))) {
			Return upper
		} Else {
			Return lower
		}
	}
	Return replacer
}

ezÎ©BracketReplacer(opening, closing) {
	back_keys := StrRepeat("{Left}", StrLen(closing))
	bracketInserter() {
		SendText(opening . closing)
		Sleep(200)
		Send(back_keys)
	}
	replacer(match, whole_text) {
		Return bracketInserter
	}
	Return replacer
}

; ezÎ©
ezÎ©_card_suites := [
	["herc"    , "â™¥"],
	["karo"    , "â™¦"],
	["pik"     , "â™ "],
	["tref"    , "â™£"],
	["hearts"  , "â™¥"],
	["diamonds", "â™¦"],
	["spades"  , "â™ "],
	["clubs"   , "â™£"],
]
ezÎ©_arrows := [
	["<=>", "â‡”"],
	["=>", "â‡’"],
	["<=", "â‡"],
	
	["<->", "â†”"],
	["->", "â†’"],
	["<-", "â†"],
]
ezÎ©_punctuation := [
	["...", "â€¦"],
	["dagger", "â€ "],
]
ezÎ©_O := [
	["/o", "Ã¸"],
	["o/", "Ã¸"],
	["/O", "Ã˜"],
	["O/", "Ã˜"],
]
ezÎ©_diacritics := [
	["ae", "Ã¦"],
	["Ae", "Ã†"],
	["AE", "Ã†"],
	
	["oe", "Å“"],
	["Oe", "Å’"],
	["OE", "Å’"],
	
	["nj", "ÇŒ"],
	["Nj", "Ç‹"],
	["NJ", "ÇŠ"],
	
	["lj", "Ç‰"],
	["Lj", "Çˆ"],
	["LJ", "Ç‡"],
	
	["dÅ¾", "Ç†"],
	["DÅ¾", "Ç…"],
	["DÅ½", "Ç„"],
	
	["dz", "Ç³"],
	["Dz", "Ç²"],
	["DZ", "Ç±"],
]
ezÎ©_double_replacements := [
	["doublepi"   , ezÎ©DoubleReplacer("â„¼", "â„¿")],
	["doublegamma", ezÎ©DoubleReplacer("â„½", "â„¾")],
	["doublesigma", "â…€"],
	
	["doublea", ezÎ©DoubleReplacer("ð•’", "ð”¸")],
	["doubleb", ezÎ©DoubleReplacer("ð•“", "ð”¹")],
	["doublec", ezÎ©DoubleReplacer("ð•”", "â„‚")],
	["doubled", ezÎ©DoubleReplacer("ð••", "ð”»")],
	["doublee", ezÎ©DoubleReplacer("ð•–", "ð”¼")],
	["doublef", ezÎ©DoubleReplacer("ð•—", "ð”½")],
	["doubleg", ezÎ©DoubleReplacer("ð•˜", "ð”¾")],
	["doubleh", ezÎ©DoubleReplacer("ð•™", "â„")],
	["doublei", ezÎ©DoubleReplacer("ð•š", "ð•€")],
	["doublej", ezÎ©DoubleReplacer("ð•›", "ð•")],
	["doublek", ezÎ©DoubleReplacer("ð•œ", "ð•‚")],
	["doublel", ezÎ©DoubleReplacer("ð•", "ð•ƒ")],
	["doublem", ezÎ©DoubleReplacer("ð•ž", "ð•„")],
	["doublen", ezÎ©DoubleReplacer("ð•Ÿ", "â„•")],
	["doubleo", ezÎ©DoubleReplacer("ð• ", "ð•†")],
	["doublep", ezÎ©DoubleReplacer("ð•¡", "â„™")],
	["doubleq", ezÎ©DoubleReplacer("ð•¢", "â„š")],
	["doubler", ezÎ©DoubleReplacer("ð•£", "â„")],
	["doubles", ezÎ©DoubleReplacer("ð•¤", "ð•Š")],
	["doublet", ezÎ©DoubleReplacer("ð•¥", "ð•‹")],
	["doubleu", ezÎ©DoubleReplacer("ð•¦", "ð•Œ")],
	["doublev", ezÎ©DoubleReplacer("ð•§", "ð•")],
	["doublew", ezÎ©DoubleReplacer("ð•¨", "ð•Ž")],
	["doublex", ezÎ©DoubleReplacer("ð•©", "ð•")],
	["doubley", ezÎ©DoubleReplacer("ð•ª", "ð•")],
	["doublez", ezÎ©DoubleReplacer("ð•«", "â„¤")],
	
	["double0", "ðŸ˜"],
	["double1", "ðŸ™"],
	["double2", "ðŸš"],
	["double3", "ðŸ›"],
	["double4", "ðŸœ"],
	["double5", "ðŸ"],
	["double6", "ðŸž"],
	["double7", "ðŸŸ"],
	["double8", "ðŸ "],
	["double9", "ðŸ¡"],
]
ezÎ©_hebrew := [
	["aleph", "â„µ"],
	["bet"  , "â„¶"],
	["gimel", "â„·"],
	["dalet", "â„¸"],
]
ezÎ©_math := [
	;#region compare
		["eq", "â‰¡"],
		["equiv", "â‰¡"],
		["equivalent", "â‰¡"],
		["ne", "â‰ "],
		
		["le", "â‰¤"],
		["ge", "â‰¥"],
	;#endregion
	;#region logic
		["and"      , "âˆ§"],
		["or"       , "âˆ¨"],
		["not"      , "Â¬"],
		
		["forall"   , "âˆ€"],
		["all"      , "âˆ€"],
		["notexists", "âˆ„"],
		["nexists"  , "âˆ„"],
		["exists"   , "âˆƒ"],
		["any"      , "âˆƒ"],
		["nany"     , "âˆƒ"],
	;#endregion
	;#region operators
		["+-", "Â±"],
		["-+", "âˆ“"],
		["cdot", "Â·"],
		["*", "Â·"],
		["sqrt", "âˆš"],
		["cbrt", "âˆ›"],
		["qvrt", "âˆœ"],
	;#endregion
	;#region set
		["notin", "âˆ‰"],
		["nin"  , "âˆ‰"],
		["in"   , "âˆˆ"],
		["cap"         , "âˆ©"],
		["intersect"   , "âˆ©"],
		["intersection", "âˆ©"],
		["cup"         , "âˆª"],
		["union"       , "âˆª"],
		["emptyset", "âŠ˜"],
	;#endregion
	;#region braces
		["ceil"  , ezÎ©BracketReplacer("âŒˆ", "âŒ‰")],
		["wide"  , ezÎ©BracketReplacer("âŒˆ", "âŒ‹")],
		["floor" , ezÎ©BracketReplacer("âŒŠ", "âŒ‹")],
		["trunc" , ezÎ©BracketReplacer("âŒˆ", "âŒ‹")],
		["braket", ezÎ©BracketReplacer("âŸ¨", "âŸ©")],
		["ceil(" , "âŒˆ"],
		["ceil)" , "âŒ‰"],
		["wide(" , "âŒŠ"],
		["wide)" , "âŒ‰"],
		["floor(", "âŒŠ"],
		["floor)", "âŒ‹"],
		["trunc(", "âŒˆ"],
		["trunc)", "âŒ‹"],
		["bra", "âŸ¨"],
		["ket", "âŸ©"],
	;#endregion
	["infinity", "âˆž"],
	["inf", "âˆž"],
	["i", "ð•š"],
	["j", "ð•›"],

	["angle", "âˆ "],
	["int", "âˆ«"],
	["pardif", "âˆ‚"],
	["sum", "Î£"],
	
	["fax", "â„»"],
	["qed", "âˆŽ"],
	; â„³â„± â„­ â„» 
]

ezÎ©_case_sensitive_replacements := joinSpread(
	ezÎ©_O,
	ezÎ©_diacritics,
)
ezÎ©_case_insensitive_replacements := joinSpread(
	[
		["kika", "â€¬"],
		["r", "â“‡"],
		["c", "Â©"],
		["tm", "â„¢"],
	],
	ezÎ©_card_suites,
	ezÎ©_arrows,
	ezÎ©_punctuation,
	ezÎ©_double_replacements,
	ezÎ©_hebrew,
	ezÎ©_math,
)
For replacement In ezÎ©_case_insensitive_replacements {
	match := replacement[1]
	replacement := replacement[2]
	match_groups[Trim].case_insensitive_matches[match] := replacement
}
For replacement In ezÎ©_case_sensitive_replacements {
	match := replacement[1]
	replacement := replacement[2]
	match_groups[Trim].exact_matches[match] := replacement
}

#Hotstring EndChars `t
#Hotstring O?


; arrows
	:O:<=>::â‡”
	:O:=>::â‡’
	:O:<=::â‡
	
	:O:<->::â†”
	:O:->::â†’
	:O:<-::â†
; end

; punctuation
	::...::â€¦
; end

; letters
	<^>!r:: SendText("â“‡")
	<^>!c:: SendText("Â©")
; end

; math & logic
	; operators
		:O:+-::Â±
		:O:-+::âˆ“
	; end
; end
	
;